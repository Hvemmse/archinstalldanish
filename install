#opret root password
passwd

bios () {

echo Indtast drev som /dev/sdx dvs a for x eller b for x

read part

#install grub
grub-install --target=i386-pc ${part}

}



efi () {

grub-install --target=x86_64-efi --efi-directory=esp --bootloader-id=GRUB

}


if [ -d "/sys/firmware/efi/efivars" ] 
then
 efi
    
else
bios
fi




#set localtime
ln -sf /usr/share/zoneinfo/Europe/Copenhagen /etc/localtime

#locale gen

echo "da_DK.UTF-8 UTF-8" >> /etc/locale.gen
echo "da_DK ISO-8859-1" >> /etc/locale.gen

# run locale-gen
locale-gen

#set language in locale.conf
echo "LANG=da_DK.UTF-8" > /etc/locale.conf

#set keymap 
#KEYMAP=de-latin1
echo "KEYMAP=dk" > /etc/vconsole.conf
echo "setxkbmap dk" >> /etc/vconsole.conf


# install pakker
# pacman -S - < packages.x86_64 
pacman -S networkmanager pulseaudio pavucontrol sudo


#set hostname > 
echo indstast Hostname?
read hostname

echo ${hostname} > /etc/hostname


#create Hostfile
echo "127.0.0.1	localhost" > /etc/hosts
echo "::1		localhost" >> /etc/hosts
echo "127.0.1.1	archlinux.localdomain	archlinux" >> /etc/hosts


# enable services
# systemctl enable lightdm
systemctl enable NetworkManager
# systemctl enable cups

#mkgrub-config
grub-mkconfig -o /boot/grub/grub.cfg

#config mkinitcpio -P
mkinitcpio -P

# set username
echo Indtast brugernavn til bruger
read user

useradd -m -G wheel -s /bin/bash ${user}

passwd ${user}

#exit
exit
